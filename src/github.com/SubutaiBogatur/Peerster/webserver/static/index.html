<!DOCTYPE html>
DISCLAIMER: I don't like frontend and thus it's bad and ugly. Please have a look at concurrent backend: it's very good and beautiful (imho)
<body>

<div id="frame">
    <div style="margin-bottom: 20px">
        <h3>
            this gossiper
        </h3>

        <div id="gossiper-name">
        </div>

        <div id="gossiper-id">
        </div>

        <input type="text" id="gossiper-text-input" placeholder="New gossiper name..."/>
        <button id="gossiper-name-button">
            Change name
        </button>
    </div>

    <div>
        <div style="float: left">
            <h3>known peers</h3>
            <ul id="peers-list"></ul>

            <input type="text" id="peer-input" placeholder="New peer ip:port ..."/>
            <button id="add-peer-button">Add peer</button>

            <h3>rumor messages</h3>

            <input type="text" id="rumor-message-input" placeholder="New message to gossip..."/>
            <button id="send-rumor-message-button">Send rumor message</button>

            <ul id="rumor-messages-list"></ul>
        </div>

        <div style="float: left; margin-left: 20px">
            <h3>known origins</h3>

            <ul id="origins-list">
                <li>
                    <input type="radio" name="origin" value="looser"/> looser <br>
                </li>
                <li>
                    <input type="radio" name="origin" value="asdf"> asdf <br>
                </li>
            </ul>

            <h3>private messages</h3>

            <input type="text" id="private-message-input" placeholder="New private message..."/>
            <button id="send-private-message-button">Send private message</button>

            <ul id="private-messages-list"></ul>
        </div>
    </div>

</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script>

    // init fields:
    document.getElementById("gossiper-name-button").onclick = changeGossiperNameOnClick;
    document.getElementById("add-peer-button").onclick = addNewPeerOnClick;
    document.getElementById("send-rumor-message-button").onclick = sendRumorMessageOnClick;
    document.getElementById("send-private-message-button").onclick = sendPrivateMessageOnClick;

    updateAllFields();
    var timer = setInterval(updateAllFields, 1000 * 1); // update everything once in timeout

    function jqueryAjaxGet(url, success) {
        jQuery.ajax({
            method: "GET",
            url: url,
            success: success
        })
    }

    function jqueryAjaxPost(url, data) {
        jQuery.ajax({
            method: "POST",
            url: url,
            data: data
        });
    }

    function updateAllFields() {
        // can be possibly made in one call, but laaz
        callGetGossiperName();
        callGetID();
        callGetPeers();
        callGetMessages();
        callGetOrigins();
    }

    function sendRumorMessageOnClick() {
        callSendRumorMessage();
        callGetMessages();
        callGetID();
    }

    function sendPrivateMessageOnClick() {
        callSendPrivateMessage();
        callGetMessages();
    }

    // gets both rumor and private messages
    function callGetMessages() {
        function gotMessages(msgs, status, dunno) {
            console.log(msgs);

            rumor_msgs = msgs['rumor-messages'];
            list = document.getElementById("rumor-messages-list");
            while (list.hasChildNodes()) {
                list.removeChild(list.firstChild)
            }
            var i;
            for (i = rumor_msgs.length - 1; i >= 0; i--) { // never messages higher
                list.appendChild(document.createTextNode(rumor_msgs[i].OriginalName + " - " + rumor_msgs[i].ID + " - " + rumor_msgs[i].Text));
                list.appendChild(document.createElement("br"));
            }

            private_msgs = msgs['private-messages'];
            list = document.getElementById("private-messages-list");
            while (list.hasChildNodes()) {
                list.removeChild(list.firstChild)
            }
            var i;
            for (i = private_msgs.length - 1; i >= 0; i--) { // never messages higher
                list.appendChild(document.createTextNode(private_msgs[i].Origin + " - " + private_msgs[i].Text));
                list.appendChild(document.createElement("br"));
            }
        }

        jqueryAjaxGet("/getMessages", gotMessages);
    }

    function callSendRumorMessage() {
        var msg = document.getElementById("rumor-message-input").value;
        jqueryAjaxPost("/sendRumorMessage", msg);
        document.getElementById("rumor-message-input").value = "";
    }

    function addNewPeerOnClick() {
        callAddPeer();
        callGetPeers();
    }

    function callGetPeers() {
        function gotPeers(peers, status, dunno) {
            list = document.getElementById("peers-list");
            while (list.hasChildNodes()) {
                list.removeChild(list.firstChild)
            }
            var i;
            for (i = 0; i < peers.length; i++) {
                list.appendChild(document.createTextNode(peers[i].IP + ":" + peers[i].Port));
                list.appendChild(document.createElement("br"));
            }
        }

        jqueryAjaxGet("/getPeers", gotPeers);
    }

    function callAddPeer() {
        var newPeer = document.getElementById("peer-input").value;
        jqueryAjaxPost("/addPeer", newPeer);
        document.getElementById("peer-input").value = "";
    }

    function callGetOrigins() {
        function gotOrigins(origins, status, dunno) {
            list = document.getElementById("origins-list");
            while (list.hasChildNodes()) {
                list.removeChild(list.firstChild)
            }
            var i;
            var radioHtmlTemplate = '<input type="radio" name="origins" ';
            for (i = 0; i < origins.length; i++) {
                var radioHtml = radioHtmlTemplate + 'value="' + origins[i] +'"/>' + " " + origins[i];
                var li = document.createElement('li');
                li.innerHTML = radioHtml;
                list.appendChild(li);
            }
        }

        jqueryAjaxGet("/getOrigins", gotOrigins);
    }

    function changeGossiperNameOnClick() {
        callSetGossiperName();
        callGetGossiperName();
        callGetID();
    }

    function callSetGossiperName() {
        var newName = document.getElementById("gossiper-text-input").value;
        jqueryAjaxPost("/setGossiperName", newName);
        document.getElementById("gossiper-text-input").value = "";
    }

    function callGetGossiperName() {
        function gotNewName(name, status, dunno) {
            document.getElementById("gossiper-name").innerHTML = "name: " + name;
        }

        jqueryAjaxGet("/getGossiperName", gotNewName);
    }

    function callGetID() {
        function gotID(id, status, dunno) {
            document.getElementById("gossiper-id").innerHTML = "id: " + id;
        }

        jqueryAjaxGet("/getGossiperID", gotID);
    }


</script>
</body>
